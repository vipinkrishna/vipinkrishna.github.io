(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(33)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(7),l=n.n(r),s=n(5),i=n(8),c=n(9),p=n(11),u=n(10),d=n(12),h=(n(25),n(1));n(26),n(27);var m=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"loader"},o.a.createElement("div",{className:"ball"}),o.a.createElement("div",{className:"ball"}),o.a.createElement("div",{className:"ball"})))},g=n(6),E=5,T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).startTimer=function(){n.timerController||(n.timerController=setInterval(function(){1===n.props.timer?(n.stopTimer(),n.apiFetchCount=1):n.props.decrementTimer()},1e3))},n.stopTimer=function(){n.timerController&&(clearInterval(n.timerController),n.props.resetTimer(),delete n.timerController)},n.handleTypingSearch=function(e){var t=e.target.value;n.props.setCharacter(Object(s.a)({},e.target.name,t)),n.props.setSearchResult({searchResult:[]}),n.debounce=(new Date).getTime();setTimeout(function(){(new Date).getTime()-n.debounce>=500&&(""!==t.trim()?"Luke Skywalker"===n.props.username?(n.props.setLoading({loading:!0}),fetch("https://swapi.co/api/planets/?search=".concat(n.props.search),{mode:"cors"}).then(function(e){return e.json()}).then(function(e){n.props.setState({searchResult:e,loading:!1})}).catch(function(){console.log("Unable to Connect!"),n.props.setLoading({loading:!1})})):n.apiFetchCount<=E&&(n.props.setLoading({loading:!0}),n.startTimer(),fetch("https://swapi.co/api/planets/?search=".concat(n.props.search),{mode:"cors"}).then(function(e){return e.json()}).then(function(e){n.props.setState({searchResult:e,loading:!1}),n.apiFetchCount++}).catch(function(){console.log("Unable to Connect!"),n.props.setLoading({loading:!1})}),n.apiFetchCount===E&&(console.log("TIMEOUT!"),n.props.setState({wait:!0}))):n.props.setSearchResult({searchResult:[]}))},500)},n.debounce=null,n.apiFetchCount=1,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.searchResult&&this.props.searchResult.results&&this.props.searchResult.results.map(function(e,t){var n,a=(n="unknown"===e.population?800:e.population>=1e12?700:e.population>=1e10&&e.population<1e12?600:e.population>=1e8&&e.population<1e10?500:e.population>=1e6&&e.population<1e8?400:e.population>=1e4&&e.population<1e6?300:e.population>=100&&e.population<1e4?200:100)/800*360,r={width:n,height:n,fontSize:n/10,boxShadow:"0 0 5px 1px hsla(".concat(a,",100%,50%,0.5), inset 0 0 50px 1px hsla(").concat(a,",100%,50%,0.8)")};return o.a.createElement("li",{key:t,style:r},o.a.createElement("span",{style:{color:"red"}},e.name),o.a.createElement("span",{style:{color:"blue"}},"unknown"===e.population?null:e.population))});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"Planets"},o.a.createElement("div",{className:"Logout"},o.a.createElement("button",{onClick:this.props.logout},"Logout")),o.a.createElement("div",{className:"User"},o.a.createElement("div",null,"Welcome ",o.a.createElement("strong",null,this.props.username),"!"),o.a.createElement("div",{className:"Timer"},20===this.props.timer?null:this.props.timer),o.a.createElement("div",{className:"Wait"},this.props.wait?"Fetch Limit Exceeded! Please wait...":null)),o.a.createElement("div",{className:"BackwardForward"},o.a.createElement("button",{className:this.props.bFinished,onClick:this.props.backward},"Back"),o.a.createElement("button",{className:this.props.fFinished,onClick:this.props.forward},"Next")),o.a.createElement("div",{className:"Search"},o.a.createElement("input",{name:"search",placeholder:"Search",onChange:this.handleTypingSearch})),o.a.createElement("ul",null,this.props.loading?o.a.createElement(m,null):e)))}},{key:"componentWillUnmount",value:function(){this.stopTimer()}}]),t}(a.Component),f={forward:function(){return function(e,t){e({type:"UPDATE_STATE",payload:{fFinished:""}});var n=t().planets;if(n.searchResult&&n.searchResult.next){var a=n.searchResult.next;e({type:"UPDATE_STATE",payload:{searchResult:[],loading:!0}}),fetch(a,{mode:"cors"}).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_STATE",payload:{searchResult:t,loading:!1}})})}else setTimeout(function(){e({type:"UPDATE_STATE",payload:{fFinished:"Finished"}})},0)}},backward:function(){return function(e,t){e({type:"UPDATE_STATE",payload:{bFinished:""}});var n=t().planets;if(n.searchResult&&n.searchResult.previous){var a=n.searchResult.previous;e({type:"UPDATE_STATE",payload:{searchResult:[],loading:!0}}),fetch(a,{mode:"cors"}).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_STATE",payload:{searchResult:t,loading:!1}})})}else setTimeout(function(){e({type:"UPDATE_STATE",payload:{bFinished:"Finished"}})},0)}},decrementTimer:function(){return{type:"DECREMENT_TIMER"}},resetTimer:function(){return{type:"RESET_TIMER"}},setCharacter:function(e){return{type:"UPDATE_STATE",payload:Object(h.a)({},e)}},setSearchResult:function(e){return{type:"UPDATE_STATE",payload:Object(h.a)({},e)}},setLoading:function(e){return{type:"UPDATE_STATE",payload:Object(h.a)({},e)}},setState:function(e){return{type:"UPDATE_STATE",payload:Object(h.a)({},e)}}},y=Object(g.b)(function(e){return{search:e.planets.search,searchResult:e.planets.searchResult,bFinished:e.planets.bFinished,fFinished:e.planets.fFinished,loading:e.planets.loading,timer:e.planets.timer,wait:e.planets.wait,state:e.planets}},f)(T),b=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.loginError?"Login LoginError":"Login",t=this.props.loading?{marginTop:"20px",marginBottom:"20px"}:{marginTop:"0",marginBottom:"0"},n=o.a.createElement("div",{className:"LoginContainer"},o.a.createElement("div",{className:e},o.a.createElement("form",{onSubmit:this.props.handleLogin},o.a.createElement("input",{name:"username",onInput:this.props.handleInput,placeholder:"Username"}),o.a.createElement("input",{type:"password",name:"password",onInput:this.props.handleInput,placeholder:"Password"}),o.a.createElement("button",null,"Login")),o.a.createElement("div",{className:"Loader",style:t},this.props.loading?o.a.createElement(m,null):null)));return o.a.createElement(o.a.Fragment,null,this.props.loggedIn?o.a.createElement(y,{username:this.props.username,logout:this.props.handleLogout}):n)}}]),t}(a.Component),v={handleLogin:function(e){return function(t,n){e.preventDefault(),t({type:"UPDATE_STATE",payload:{loginError:!1,loading:!0}}),fetch("https://swapi.co/api/people/",{mode:"cors"}).then(function(e){return e.json()}).then(function(e){t({type:"UPDATE_STATE",payload:{people:e.results}});var a=n(),o=a.login,r=a.planets.people.find(function(e){return e.name===o.username&&e.birth_year===o.password});t(r?{type:"UPDATE_STATE",payload:{loggedIn:!0,loading:!1}}:{type:"UPDATE_STATE",payload:{loggedIn:!1,loading:!1,loginError:!0}})}).catch(function(){console.log("Unable to Connect!"),t({type:"UPDATE_STATE",payload:{loading:!1}})})}},handleInput:function(e){return function(t){t({type:"UPDATE_STATE",payload:Object(s.a)({},e.target.name,e.target.value)})}},handleLogout:function(){return function(e){e({type:"UPDATE_STATE",payload:{loggedIn:!1,username:"",password:""}}),console.log("Logged Out!")}}},A=Object(g.b)(function(e){return{loginError:e.login.loginError,loggedIn:e.login.loggedIn,loading:e.login.loading,people:e.login.people,password:e.login.password,username:e.login.username}},v)(b),w=n(3),S=n(19),j={username:"Biggs Darklighter",password:"24BBY",people:[],loading:!1,loggedIn:!1,loginError:!1},R={search:null,searchResult:null,bFinished:"",fFinished:"",loading:!1,timer:20,wait:!1},O=Object(w.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,o=Object(h.a)({},e);switch(n){case"UPDATE_STATE":return Object(h.a)({},e,a);default:return o}},planets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,o=Object(h.a)({},e);switch(n){case"UPDATE_STATE":return Object(h.a)({},e,a);case"DECREMENT_TIMER":var r=e.timer;return Object(h.a)({},e,{timer:r-1});case"RESET_TIMER":return Object(h.a)({},e,{timer:20,wait:!1});default:return o}}}),U=(n(32),[S.a]),D=Object(w.d)(O,w.a.apply(void 0,U));l.a.render(o.a.createElement(g.a,{store:D},o.a.createElement(A,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.fc2e97f7.chunk.js.map
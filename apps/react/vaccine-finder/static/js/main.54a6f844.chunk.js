(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(9),i=n.n(a),r=(n(15),n(10)),o=n(6),l=n(3),d=n.n(l),u=n(7),j=n(2),b=(n(17),n(18),n(0)),p=function(e){var t=e.setPincodes,n=e.isPincodeInputEmpty,s=e.setIsPincodeInputEmpty,a=e.setWatermarkHidden,i=(e.findHandler,Object(c.useRef)());Object(c.useEffect)((function(){var e=localStorage.getItem("pincodes")||"";i.current.value=e;var n=r(e);t(n)}),[t]),Object(c.useEffect)((function(){setTimeout((function(){s(!1)}),600)}),[n,s]);var r=function(e){var t=e.trim().split(/\D+/);return!t[0]&&t.shift(),!t[t.length-1]&&t.pop(),t};return Object(b.jsx)("div",{className:"pincodes",children:Object(b.jsx)("input",{type:"search",ref:i,className:"pincodes-text "+(n?"empty":""),placeholder:"Search by pincodes...",onFocus:function(){return a(!0)},onBlur:function(){return a(!1)},onChange:function(e){var n=r(e.target.value);t(n),localStorage.setItem("pincodes",e.target.value)}})})},f=(n(20),function(e){var t=e.setAge;return Object(b.jsx)("div",{className:"age",children:Object(b.jsxs)("select",{className:"age-select",onChange:function(e){return t(Number(e.target.value))},children:[Object(b.jsx)("option",{value:"18",children:"Age 18+"}),Object(b.jsx)("option",{value:"40",children:"Age 40+"}),Object(b.jsx)("option",{value:"45",children:"Age 45+"})]})})}),v=(n(21),function(e){var t=e.setDose;return Object(b.jsx)("div",{className:"dose",children:Object(b.jsxs)("select",{className:"dose-select",onChange:function(e){return t(e.target.value)},children:[Object(b.jsx)("option",{value:"FIRST",children:"Dose 1"}),Object(b.jsx)("option",{value:"SECOND",children:"Dose 2"})]})})}),h=(n(22),n(23),function(e){var t=e.busy;return Object(b.jsx)(b.Fragment,{children:t?Object(b.jsx)("div",{className:"rotator"}):"Find"})}),O=function(e){var t=e.findHandler,n=e.busy,s=e.noResults,a=e.setNoResults;Object(c.useEffect)((function(){setTimeout((function(){a(!1)}),8e3)}),[s,a]);var i="find-button";return s&&(i+=" noresults"),Object(b.jsxs)("div",{className:"commands",children:[s?Object(b.jsx)("div",{className:"notifyNoresults",children:"No vaccine slots available!"}):"",Object(b.jsx)("button",{className:i,onClick:t,children:Object(b.jsx)(h,{busy:n})})]})},x=(n(24),n(25),function(e){var t=e.item;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("div",{className:"date",children:[Object(b.jsx)("label",{children:"Date"}),Object(b.jsx)("span",{children:t.datestamp})]}),Object(b.jsxs)("div",{className:"name",children:[Object(b.jsx)("label",{children:"Center"}),Object(b.jsx)("span",{children:t.name})]}),Object(b.jsxs)("div",{className:"address",children:[Object(b.jsx)("label",{children:"Address"}),Object(b.jsx)("span",{children:t.address})]}),Object(b.jsxs)("div",{className:"pin",children:[Object(b.jsx)("label",{children:"Pin"}),Object(b.jsx)("span",{children:t.pincode})]}),Object(b.jsxs)("div",{className:"ageLimit",children:[Object(b.jsx)("label",{children:"Age"}),Object(b.jsx)("span",{children:t.min_age_limit})]}),Object(b.jsxs)("div",{className:"vaccine",children:[Object(b.jsx)("label",{children:"Vaccine"}),Object(b.jsx)("span",{children:t.vaccine})]}),Object(b.jsxs)("div",{className:"dose1",children:[Object(b.jsxs)("label",{children:["1",Object(b.jsx)("sup",{children:"st"})," Dose"]}),Object(b.jsx)("span",{children:t.available_capacity_dose1})]}),Object(b.jsxs)("div",{className:"dose2",children:[Object(b.jsxs)("label",{children:["2",Object(b.jsx)("sup",{children:"nd"})," Dose"]}),Object(b.jsx)("span",{children:t.available_capacity_dose2})]}),Object(b.jsxs)("div",{className:"feeType",children:[Object(b.jsx)("label",{children:"Fee"}),Object(b.jsx)("span",{className:t.fee_type,children:t.fee_type})]})]})}),m=function(e){var t=e.data;return Object(b.jsx)("div",{className:"findData",children:t.map((function(e,t){return Object(b.jsx)(x,{item:e},t)}))})};var g=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),i=Object(j.a)(a,2),l=i[0],h=i[1],x=Object(c.useState)([]),g=Object(j.a)(x,2),y=g[0],N=g[1],k=Object(c.useState)(18),S=Object(j.a)(k,2),_=S[0],w=S[1],E=Object(c.useState)("FIRST"),D=Object(j.a)(E,2),F=D[0],I=D[1],T=Object(c.useState)(!1),P=Object(j.a)(T,2),R=P[0],A=P[1],C=Object(c.useState)(!1),H=Object(j.a)(C,2),z=H[0],B=H[1],W=Object(c.useState)(!1),G=Object(j.a)(W,2),J=G[0],L=G[1],M=Object(c.useState)(!1),V=Object(j.a)(M,2),q=V[0],K=V[1],Y=Object(c.useState)(null),Q=Object(j.a)(Y,2),U=Q[0],X=Q[1];Object(c.useEffect)((function(){l&&(n.length?(console.log("Got Result!"),window.scrollTo({top:document.documentElement.clientHeight,behavior:"smooth"})):(console.log("Empty Result!"),L(!0)))}),[l,n.length]),Object(c.useEffect)((function(){Z()}),[]);var Z=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.countapi.xyz/get/vaccineFinder/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,X(n.value);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.countapi.xyz/hit/vaccineFinder/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,X(n.value);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e){return new Promise((function(t){setTimeout(t,e)}))};function te(){if(R)console.log("Processing!");else{A(!0),console.log("Find Starts!"),s([]),h(!1),L(!1);var e=new window.AudioContext,t=function(){for(var e=new Date,t=[],n=0;n<5;n++)t.push(e.toLocaleDateString("nl",{day:"2-digit",month:"2-digit",year:"numeric"})),e.setDate(e.getDate()+1);return t}();if(!y.length)return A(!1),B(!0),void console.log("Pincode(s) Missing! Find Again...");y.length&&t.length&&_&&F&&function(){c.apply(this,arguments)}()}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=e.createOscillator(),c=e.createGain();n.connect(c),c.connect(e.destination),n.frequency.value=2500,n.start(e.currentTime),n.stop(e.currentTime+t/1e3)}function c(){return(c=Object(u.a)(d.a.mark((function e(){var c,a,i,l,u,j,b,p,f,v,O,x,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(o.a)(y),e.prev=1,c.s();case 3:if((a=c.n()).done){e.next=61;break}i=a.value,l=Object(o.a)(t),e.prev=6,l.s();case 8:if((u=l.n()).done){e.next=51;break}return j=u.value,b="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode="+i+"&date="+j,p=void 0,e.prev=12,e.next=15,fetch(b);case 15:if((p=e.sent).ok){e.next=18;break}throw new Error(p.statusText);case 18:e.next=27;break;case 20:return e.prev=20,e.t0=e.catch(12),console.warn(e.t0.message),A(!1),h(!0),console.log("Pincode Error!"),e.abrupt("return");case 27:return e.next=29,p.json();case 29:f=e.sent,v=f.sessions,O=Object(o.a)(v),e.prev=32,m=d.a.mark((function e(){var t,c,a,i,o,l,u,j,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.value,c=t.date,a=t.name,i=t.address,o=t.pincode,l=t.available_capacity_dose1,u=t.available_capacity_dose2,j=t.vaccine,b=t.min_age_limit,p=t.fee_type,!(b===_&&("FIRST"===F?l:u)>0)){e.next=7;break}return s((function(e){return[].concat(Object(r.a)(e),[{datestamp:c,pincode:o,name:a,address:i,vaccine:j,min_age_limit:b,available_capacity_dose1:l,available_capacity_dose2:u,fee_type:p}])})),n(200),e.next=7,ee(300);case 7:case"end":return e.stop()}}),e)})),O.s();case 35:if((x=O.n()).done){e.next=39;break}return e.delegateYield(m(),"t1",37);case 37:e.next=35;break;case 39:e.next=44;break;case 41:e.prev=41,e.t2=e.catch(32),O.e(e.t2);case 44:return e.prev=44,O.f(),e.finish(44);case 47:return e.next=49,ee(50);case 49:e.next=8;break;case 51:e.next=56;break;case 53:e.prev=53,e.t3=e.catch(6),l.e(e.t3);case 56:return e.prev=56,l.f(),e.finish(56);case 59:e.next=3;break;case 61:e.next=66;break;case 63:e.prev=63,e.t4=e.catch(1),c.e(e.t4);case 66:return e.prev=66,c.f(),e.finish(66);case 69:A(!1),h(!0),console.log("Find Completed!"),$();case 73:case"end":return e.stop()}}),e,null,[[1,63,66,69],[6,53,56,59],[12,20],[32,41,44,47]])})))).apply(this,arguments)}}var ne="watermark",ce="appTitle";return q&&(ne+="  hideWatermark",ce+="  hideAppTitle"),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"dashboard",children:[Object(b.jsxs)("div",{className:"dataInputs",children:[Object(b.jsxs)("div",{className:ce,children:["vaccineFinder",Object(b.jsx)("sup",{style:{fontSize:8,letterSpacing:0},children:"VK"})]}),Object(b.jsx)(p,{setPincodes:N,isPincodeInputEmpty:z,setIsPincodeInputEmpty:B,setWatermarkHidden:K,findHandler:te}),Object(b.jsx)(f,{setAge:w}),Object(b.jsx)(v,{setDose:I})]}),Object(b.jsx)(O,{findHandler:te,busy:R,noResults:J,setNoResults:L}),Object(b.jsxs)("div",{className:ne,children:["\xa9 vipinkrishna 2021 ",U&&"#"+U]})]}),Object(b.jsx)("div",{className:"findResults",children:Object(b.jsx)(m,{data:n})})]})};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.54a6f844.chunk.js.map